---
import MainHead from '../components/MainHead.astro';
import Footer from '../components/Footer/index.jsx';
import Nav from '../components/Nav/index.jsx';
import BlogPreview from '../components/BlogPreview/index.jsx';
import { MediumPost } from '../types/medium';

const USERNAME = "nikolajjsj";
const API_URL = `https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/@${USERNAME}`;
const response = await fetch(API_URL);
const data = await response.json();
const posts: MediumPost[] = data.items;
---

<html lang="en">

<head>
  <MainHead title="Blog | Nikolaj Jensen" description="Learn about Nikolaj Jensen's most recent blog posts" />
  <style lang="scss">
    .grid {
      display: grid;
      grid-gap: 3rem;
    }
  </style>
</head>

<body>
  <Nav />

  <div class="wrapper">
    <h1 class="title mt4 mb4">Blog Posts</h1>

    <div class="grid">
      {posts.map((p) =>
      <BlogPreview post={p} />)}
    </div>
  </div>

  <Footer />
</body>

</html>